import{_ as $}from"./AuthenticatedLayout-482c9fe4.js";import{l as V,r as o,h as E,o as s,c as u,a as l,u as d,w as r,e as C,F as k,Z as O,k as f,j as I,d as t,i as j,t as c,n as F,O as M}from"./app-bd1de732.js";import{_ as S}from"./Modal-59e05967.js";import{S as m}from"./sweetalert2.all-3916f515.js";import"./NavLink-f218cb80.js";import"./_plugin-vue_export-helper-c27b6911.js";const U=t("h2",null,"Loan Management",-1),Y={key:0,class:"button-container"},z=t("button",{class:"btn btn-success"},"Add Loan",-1),P={class:"py-6"},R={class:"max-w-7xl mx-auto px-2"},Z={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},q={class:"p-6 text-gray-900"},G=t("thead",null,[t("tr",null,[t("th",{class:"d-none"},"ID"),t("th",null,"Applicant Name"),t("th",null,"Loan Amount"),t("th",null,"Installments"),t("th",null,"Date"),t("th",null,"Status"),t("th",null,"Actions")])],-1),H={class:"d-none"},J=t("button",{class:"btn btn-info btn-sm mr-1"},"View",-1),K=t("button",{class:"btn btn-primary btn-sm mr-1"},"Edit",-1),Q=["onClick"],W=["onClick"],X=["onClick"],rt={__name:"index",props:{loanData:{type:Array,default:[]},authUser:{},user_type:String},setup(p){const b=p,D=(()=>0)(),L=V({order:[[D,"desc"]]}),i=o();o();const h=o(!1),_=o(!1),g=o(!1),v=o(!1),A=(n,a)=>{i.value=n,h.value=!0,v.value=a},B=(n,a)=>{i.value=n,_.value=!0,g.value=a},w=()=>{h.value=!1,_.value=!1},N=n=>{switch(n.toLowerCase()){case"pending":return"text-yellow-500";case"approved":return"text-green-500";case"rejected":return"text-red-500";case"incomplete":return"text-black-500";case"fullcomplete":return"text-blue-500";case"re-apply":return"text-orange-500";default:return"text-gray-800"}},T=async n=>{const{value:a}=await m.fire({title:"Are you sure?",text:"You want to Delete Loan Record?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"});try{a?(await axios.delete(`/loan/delete/${n}`),m.fire({icon:"success",title:"Success",text:"Loan Deleted Successfully"}),M.visit(route("loan.index")),setTimeout(()=>{window.location.reload()},1500)):m.fire({icon:"info",title:"Canceled",text:"Deletion canceled."})}catch{m.fire({icon:"error",title:"Error",text:"Error Deleting Agent. Please try again."})}};return(n,a)=>{const y=E("DataTable");return s(),u(k,null,[l(d(O),{title:"Loan Management"}),l($,null,{header:r(()=>[U,p.user_type==1?(s(),u("div",Y,[l(d(f),{href:n.route("loan.create")},{default:r(()=>[z]),_:1},8,["href"])])):I("",!0)]),default:r(()=>[t("div",P,[t("div",R,[t("div",Z,[t("div",q,[l(y,{options:L,class:"display",style:{border:"2px black",width:"100%"}},{default:r(()=>[G,t("tbody",null,[(s(!0),u(k,null,j(b.loanData,e=>(s(),u("tr",{key:e.id},[t("td",H,c(e.id),1),t("td",null,c(e.applicant_name),1),t("td",null,c(e.loan_amount),1),t("td",null,c(e.numberOfmonths)+" months",1),t("td",null,c(e.date),1),t("td",{class:F(["font-bold",N(e.status)])},c(e.status),3),t("td",null,[l(d(f),{href:n.route("loan.view",e.id)},{default:r(()=>[J]),_:2},1032,["href"]),l(d(f),{href:n.route("loan.edit",e.id)},{default:r(()=>[K]),_:2},1032,["href"]),b.authUser.user_type==1?(s(),u("button",{key:0,onClick:x=>A(e.id,e.assigned_to),class:"btn btn-warning btn-sm mr-1"},"Assign To",8,Q)):I("",!0),t("button",{onClick:x=>B(e.id,e.statusValue),class:"btn btn-success btn-sm mr-1"},"Status",8,W),t("button",{class:"btn btn-danger btn-sm mr-1",onClick:x=>T(e.id)},"Delete",8,X)])]))),128))])]),_:1},8,["options"])])])])])]),_:1}),(s(),C(S,{key:1,show:h.value,loanId:i.value,customerId:n.selectedCustomerId,agentName:v.value,modal:2,onClose:w},null,8,["show","loanId","customerId","agentName"])),(s(),C(S,{key:2,loanId:i.value,show:_.value,initialStatus:g.value,modal:3,onClose:w},null,8,["loanId","show","initialStatus"]))],64)}}};export{rt as default};
