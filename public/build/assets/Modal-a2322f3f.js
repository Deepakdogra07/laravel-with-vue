import{r as h,H as D,T as L,o as a,c as i,d as e,y as v,I as T,F as V,i as j,t as _,f as $,v as B,q as x,J as F,E as k,x as S,u as m,j as b,K as M,e as E,a as w,w as C,D as N,C as A,n as O,s as R,L as W}from"./app-c53730e3.js";const P=["value"],U=e("option",{value:null,disabled:""},"Select Agent",-1),z=["value"],q=e("button",{class:"btn btn-primary btn-lg",type:"submit"},"Assign",-1),H={__name:"AssignAgent",props:["leadId","close"],emits:["close"],setup(s,{emit:p}){const c=h([]),n=h(null),t=s,d=p;D.get("/assignAgent").then(r=>{c.value=r.data}).catch(r=>{console.error("Error:",r)});const y=L({agent:null}),g=()=>{const r=n.value,l=t.leadId,o=B(),u=`/assignAgentSave/${r}/${l}`;y.post(u,{agent_id:r,id:l},{onSuccess:I=>{console.log(I),o.success("Assign Agent Added Successfully")},onError:I=>{o.error("Validation Error: Please check your inputs")}}),f()},f=()=>{d("close")};return(r,l)=>(a(),i("form",{onSubmit:$(g,["prevent"])},[e("div",null,[e("input",{type:"hidden",value:s.leadId},null,8,P),v(e("select",{class:"form-select form-select-lg mb-3",id:"agent",name:"","aria-label":".form-select-lg","onUpdate:modelValue":l[0]||(l[0]=o=>n.value=o)},[U,(a(!0),i(V,null,j(c.value,o=>(a(),i("option",{key:o.id,value:o.id},_(o.name),9,z))),128))],512),[[T,n.value]]),q,e("button",{class:"btn btn-secondary btn-lg ms-2",type:"button",onClick:f},"Close")])],32))}},J={key:0,class:"loading-overlay"},K=e("i",{class:"fas fa-spinner fa-spin"},null,-1),G=[K],Q=e("option",{value:null,disabled:""},"Select Agents",-1),X=["value"],Y=e("button",{class:"btn btn-primary btn-lg",type:"submit"},"Submit",-1),Z={__name:"AssignedModal",props:["customerId","close","agentName","customerId","loanId"],emits:["close"],setup(s,{emit:p}){const c=h([]);h(null);const n=s,t=L({agent:null,loanId:n.loanId});D.get("/assignAgent").then(r=>{c.value=r.data}).catch(r=>{console.error("Error:",r)});const d=p;x(()=>{console.log(n.loanId)});const y=async()=>{const r=n.customerId,l=B(),o=`/storeAssignAgent/${r}`;t.post(o,{onStart:()=>{t.pending=!0},onSuccess:u=>{l.success("Agent assigned Successfully"),setTimeout(()=>{window.location.reload()},1500)},onError:u=>{l.error("Validation Error: Some error occured")},onFinish:()=>{t.pending=!1}})};F(()=>n.show,()=>{n.show?document.body.style.overflow="hidden":document.body.style.overflow=null});const g=()=>{console.log("Asssigned Modal vue"),d("close")},f=r=>{r.key==="Escape"&&n.show&&g()};return x(async()=>{document.addEventListener("keydown",f),t.agent=n.agentName}),k(()=>{document.removeEventListener("keydown",f),document.body.style.overflow=null}),S(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"})[n.maxWidth]),(r,l)=>(a(),i("form",{onSubmit:$(y,["prevent"])},[m(t).pending?(a(),i("div",J,G)):b("",!0),v(e("input",{type:"hidden","onUpdate:modelValue":l[0]||(l[0]=o=>m(t).loanId=o)},null,512),[[M,m(t).loanId]]),v(e("select",{class:"form-select form-select-lg mb-3",id:"agent",name:"","aria-label":".form-select-lg","onUpdate:modelValue":l[1]||(l[1]=o=>m(t).agent=o)},[Q,(a(!0),i(V,null,j(c.value,o=>(a(),i("option",{key:o.id,value:o.id},_(o.name),9,X))),128))],512),[[T,m(t).agent]]),Y,e("button",{class:"btn btn-secondary btn-lg ms-2",type:"button",onClick:g},"Close")],32))}},ee={key:0,class:"loading-overlay"},te=e("i",{class:"fas fa-spinner fa-spin"},null,-1),se=[te],oe=e("option",{value:null,disabled:""},"Select Status",-1),ne=["value","disabled"],le={key:1},ae={key:2},ce=e("button",{class:"btn btn-primary btn-lg",type:"submit"},"Submit",-1),re={__name:"ChangeStatus",props:["loanId","close","initialStatus","userType"],emits:["close"],setup(s,{emit:p}){const c=h([]);h(null);const n=s,t=L({status:null,incompleteReason:null,loanTransferProof:null}),d=p,y=async()=>{try{const l=await D.get("/status-options");c.value=l.data}catch(l){console.error("Error fetching status options:",l)}};x(async()=>{document.addEventListener("keydown",r),await y(),t.status=n.initialStatus});const g=async()=>{const l=n.loanId,o=B(),u=`/changeLoanStatus/${l}`;t.post(u,{onStart:()=>{t.pending=!0},onSuccess:I=>{o.success("Status changed Successfully")},onError:I=>{o.error("Validation Error: Please check your input")},onFinish:()=>{t.pending=!1}})},f=()=>{d("close")},r=l=>{l.key==="Escape"&&n.show&&f()};return k(()=>{document.removeEventListener("keydown",r),document.body.style.overflow=null}),S(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"})[n.maxWidth]),(l,o)=>(a(),i("form",{onSubmit:$(g,["prevent"])},[m(t).pending?(a(),i("div",ee,se)):b("",!0),v(e("select",{class:"form-select form-select-lg mb-3",id:"status",name:"","aria-label":".form-select-lg","onUpdate:modelValue":o[0]||(o[0]=u=>m(t).status=u)},[oe,(a(!0),i(V,null,j(c.value,u=>(a(),i("option",{key:u.value,value:u.value,disabled:s.userType==2&&u.value==6},_(u.name),9,ne))),128))],512),[[T,m(t).status]]),m(t).status==3||m(t).status==2?(a(),i("p",le,[v(e("input",{type:"text","onUpdate:modelValue":o[1]||(o[1]=u=>m(t).incompleteReason=u),placeholder:"Enter Reason"},null,512),[[M,m(t).incompleteReason]])])):b("",!0),m(t).status==6?(a(),i("p",ae,[e("input",{class:"form-control",type:"file",onInput:o[2]||(o[2]=u=>m(t).loanTransferProof=u.target.files[0])},null,32)])):b("",!0),ce,e("button",{class:"btn btn-secondary btn-lg ms-2",type:"button",onClick:f},"Close")],32))}},ie={class:"new-popup"},de=["href"],ue={__name:"ConfirmModal",props:{loanData:{type:Object}},emits:["close"],setup(s,{emit:p}){const c=p;x(async()=>{document.addEventListener("keydown",t)});const n=()=>{c("close")},t=d=>{d.key==="Escape"&&props.show&&n()};return k(()=>{document.removeEventListener("keydown",t),document.body.style.overflow=null}),S(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"})[props.maxWidth]),(d,y)=>(a(),i("div",ie,[e("a",{href:"/applyloan?loan_amount="+s.loanData.amount+"&time="+s.loanData.loan_period,target:"_blank",class:"banner-link"},"Sim, eu tenho",8,de),e("button",{class:"btn btn-secondary btn-lg",type:"button",onClick:n},"Não tenho")]))}},me={class:"new-popup"},ye={__name:"ConfirmModal_2",props:{loanData:{type:Object}},emits:["close","nextStep"],setup(s,{emit:p}){const c=p;x(async()=>{document.addEventListener("keydown",d)});const n=()=>{c("close")},t=()=>{c("nextStep")},d=y=>{y.key==="Escape"&&props.show&&n()};return k(()=>{document.removeEventListener("keydown",d),document.body.style.overflow=null}),S(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"})[props.maxWidth]),(y,g)=>(a(),i("div",me,[e("a",{onClick:$(t,["prevent"]),class:"banner-link text-center",style:{cursor:"pointer"}}," Sim, eu tenho "),e("button",{class:"btn btn-secondary btn-lg",type:"button",onClick:n},"Não tenho")]))}},pe={class:"fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50","scroll-region":""},fe=e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1),be=[fe],ge={key:1,class:"flex items-center justify-center h-full"},ve={class:"bg-white rounded-lg p-12 max-w-xs"},he=e("h2",{class:"text-2xl font-bold mb-4"},"Assign Agent",-1),xe={key:2,class:"flex items-center justify-center h-full"},we={class:"bg-white rounded-lg p-12 max-w-xs"},_e=e("h2",{class:"text-2xl font-bold mb-4"},"Assign Agents",-1),ke={key:3,class:"flex items-center justify-center h-full"},Se={class:"bg-white rounded-lg p-12 max-w-xs"},Ie=e("h2",{class:"text-2xl font-bold mb-4"},"Change Status",-1),Ee={key:4,class:"flex items-center justify-center h-full"},$e={class:"bg-white rounded-lg p-12"},Ce={style:{"font-size":"20px"}},Ne={key:5,class:"flex items-center justify-center h-full"},Ae={class:"bg-white rounded-lg p-12 text-center"},De={style:{"font-size":"20px"}},Te={__name:"Modal",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},modal:{type:Number,default:1},leadId:{type:null,default:null},loanId:{type:Number,default:null},initialStatus:{type:Number},agentName:{type:Number},customerId:{type:Number},loanData:{type:Object},loanDetails:{type:Array},formPayment:{type:Number},userType:{userType:Number}},emits:["close","welcome","nextStep"],setup(s,{emit:p}){const c=s,n=h(0),t=p;F(()=>c.show,()=>{c.show?document.body.style.overflow="hidden":document.body.style.overflow=null,n.value++});const d=()=>{console.log("Modal vue"),c.closeable&&(c.modal=0,t("close"),location.reload())},y=o=>{o.key==="Escape"&&c.show&&d()};x(()=>document.addEventListener("keydown",y)),k(()=>{document.removeEventListener("keydown",y),document.body.style.overflow=null});const g=S(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"})[c.maxWidth]),f=()=>{c.closeable&&t("welcome")},r=()=>{c.closeable&&t("close")},l=()=>{t("nextStep")};return(o,u)=>(a(),E(W,{to:"body"},[w(A,{"leave-active-class":"duration-200"},{default:C(()=>[v(e("div",pe,[w(A,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:C(()=>[v(e("div",{class:"fixed inset-0 transform transition-all",onClick:d},be,512),[[N,s.show]])]),_:1}),w(A,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:C(()=>[v(e("div",{class:O(["mb-6 bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full sm:mx-auto popup-main",g.value])},[s.show?R(o.$slots,"default",{key:0}):b("",!0),s.modal===1?(a(),i("div",ge,[e("div",ve,[he,(a(),E(H,{key:n.value,leadId:s.leadId,onClose:d},null,8,["leadId"]))])])):b("",!0),s.modal===2?(a(),i("div",xe,[e("div",we,[_e,(a(),E(Z,{key:n.value,loanId:s.loanId,customerId:s.customerId,agentName:s.agentName,onClose:d},null,8,["loanId","customerId","agentName"]))])])):b("",!0),s.modal===3?(a(),i("div",ke,[e("div",Se,[Ie,(a(),E(re,{key:n.value,loanId:s.loanId,initialStatus:s.initialStatus,onClose:d,userType:s.userType},null,8,["loanId","initialStatus","userType"]))])])):b("",!0),s.modal===4?(a(),i("div",Ee,[e("div",$e,[e("p",Ce," Você tem o valor "+_(new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(Number(s.loanDetails.total_payment)))+" disponível no seu cartão de crédito? ",1),w(ue,{onClose:f,loanData:s.loanData},null,8,["loanData"])])])):b("",!0),s.modal===5?(a(),i("div",Ne,[e("div",Ae,[e("p",De," Você tem o valor "+_(new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(Number(s.formPayment)))+" disponível no seu cartão de crédito? ",1),w(ye,{onClose:r,onNextStep:l,loanData:s.loanData},null,8,["loanData"])])])):b("",!0)],2),[[N,s.show]])]),_:3})],512),[[N,s.show]])]),_:3})]))}};export{Te as _};
