import{_ as E}from"./AuthenticatedLayout-6c1d06a3.js";import{l as V,r,q as M,h as O,o as n,c as i,a as u,u as _,w as c,e as I,F as k,Z as U,k as v,j as S,d as e,i as j,t as a,n as F,O as Y,p as q,m as z}from"./app-60ff8f36.js";import{_ as D}from"./Modal-79384d44.js";import{S as h}from"./sweetalert2.all-43be97e2.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";import"./NavLink-053f2b2d.js";/* empty css                                                                   */const d=o=>(q("data-v-a30a93b2"),o=o(),z(),o),R=d(()=>e("h2",null,"Loan Management",-1)),Z={key:0,class:"button-container"},G=d(()=>e("button",{class:"btn btn-success"},"Add Loan",-1)),H={class:"py-6"},J={class:"max-w-7xl mx-auto px-2"},K={class:"bg-white overflow-auto shadow-sm sm:rounded-lg"},Q={class:"p-6 text-gray-900"},W=d(()=>e("thead",null,[e("tr",null,[e("th",{class:"d-none"},"ID"),e("th",null,"Applicant Name"),e("th",null,"Email"),e("th",null,"Loan Amount"),e("th",null,"Installments"),e("th",null,"Date"),e("th",null,"Status"),e("th",null,"Actions")])],-1)),X={class:"d-none"},ee=d(()=>e("button",{class:"btn btn-info btn-sm mr-1"},"View",-1)),te=d(()=>e("button",{class:"btn btn-primary btn-sm mr-1"},"Edit",-1)),se=["onClick"],ne=["onClick"],ae=["onClick"],oe={__name:"index",props:{loanData:{type:Array,default:[]},authUser:{},user_type:String},setup(o){const p=o,L=(()=>0)(),A=V({order:[[L,"desc"]]}),m=r();r();const f=r(!1),b=r(!1),g=r(!1),y=r(!1),B=(s,l)=>{m.value=s,f.value=!0,y.value=l},T=(s,l)=>{m.value=s,b.value=!0,g.value=l},x=()=>{f.value=!1,b.value=!1},N=s=>{switch(s.toLowerCase()){case"pending":return"text-yellow-500";case"approved":return"text-green-500";case"rejected":return"text-red-500";case"incomplete":return"text-black-500";case"fullcomplete":return"text-blue-500";case"re-apply":return"text-orange-500";default:return"text-gray-800"}},$=async s=>{const{value:l}=await h.fire({title:"Are you sure?",text:"You want to Delete Loan Record?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"});try{l?(await axios.delete(`/loan/delete/${s}`),h.fire({icon:"success",title:"Success",text:"Loan Deleted Successfully"}),Y.visit(route("loan.index")),setTimeout(()=>{window.location.reload()},1500)):h.fire({icon:"info",title:"Canceled",text:"Deletion canceled."})}catch{h.fire({icon:"error",title:"Error",text:"Error Deleting Agent. Please try again."})}};return M(()=>{}),(s,l)=>{const w=O("DataTable");return n(),i(k,null,[u(_(U),{title:"Loan Management"}),u(E,null,{header:c(()=>[R,o.user_type==1?(n(),i("div",Z,[u(_(v),{href:s.route("loan.create")},{default:c(()=>[G]),_:1},8,["href"])])):S("",!0)]),default:c(()=>[e("div",H,[e("div",J,[e("div",K,[e("div",Q,[u(w,{options:A,class:"display",style:{border:"2px black",width:"100%"}},{default:c(()=>[W,e("tbody",null,[(n(!0),i(k,null,j(p.loanData,t=>(n(),i("tr",{key:t.id},[e("td",X,a(t.id),1),e("td",null,a(t.user_name),1),e("td",null,a(t.user_email),1),e("td",null,a(t.loan_amount),1),e("td",null,a(t.numberOfmonths)+" months",1),e("td",null,a(t.date),1),e("td",{class:F(["font-bold",N(t.status)])},a(t.status),3),e("td",null,[u(_(v),{href:s.route("loan.view",t.id)},{default:c(()=>[ee]),_:2},1032,["href"]),u(_(v),{href:s.route("loan.edit",t.id)},{default:c(()=>[te]),_:2},1032,["href"]),p.authUser.user_type==1?(n(),i("button",{key:0,onClick:C=>B(t.id,t.assigned_to),class:"btn btn-warning btn-sm mr-1"},"Assign To",8,se)):S("",!0),e("button",{onClick:C=>T(t.id,t.statusValue),class:"btn btn-success btn-sm mr-1"},"Status",8,ne),e("button",{class:"btn btn-danger btn-sm mr-1",onClick:C=>$(t.id)},"Delete",8,ae)])]))),128))])]),_:1},8,["options"])])])])])]),_:1}),(n(),I(D,{key:1,show:f.value,loanId:m.value,customerId:s.selectedCustomerId,agentName:y.value,modal:2,onClose:x},null,8,["show","loanId","customerId","agentName"])),(n(),I(D,{key:2,loanId:m.value,show:b.value,initialStatus:g.value,modal:3,onClose:x,userType:p.authUser.user_type},null,8,["loanId","show","initialStatus","userType"]))],64)}}},he=P(oe,[["__scopeId","data-v-a30a93b2"]]);export{he as default};
