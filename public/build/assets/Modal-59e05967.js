import{r as b,H as E,T as A,o as c,c as r,d as e,y as v,I as C,F as N,i as V,t as L,f as M,v as B,q as _,J as T,D as F,x as U,u as m,j as h,B as W,e as w,a as S,w as I,C as k,E as $,n as j,s as D,K as O}from"./app-bd1de732.js";const R=["value"],z=e("option",{value:null,disabled:""},"Select Agent",-1),P=["value"],q=e("button",{class:"btn btn-primary btn-lg",type:"submit"},"Assign",-1),H={__name:"AssignAgent",props:["leadId","close"],emits:["close"],setup(l,{emit:p}){const i=b([]),o=b(null),s=l,y=p;E.get("/assignAgent").then(a=>{i.value=a.data}).catch(a=>{console.error("Error:",a)});const g=A({agent:null}),f=()=>{const a=o.value,n=s.leadId,t=B(),d=`/assignAgentSave/${a}/${n}`;g.post(d,{agent_id:a,id:n},{onSuccess:x=>{console.log(x),t.success("Assign Agent Added Successfully")},onError:x=>{t.error("Validation Error: Please check your inputs")}}),u()},u=()=>{y("close")};return(a,n)=>(c(),r("form",{onSubmit:M(f,["prevent"])},[e("div",null,[e("input",{type:"hidden",value:l.leadId},null,8,R),v(e("select",{class:"form-select form-select-lg mb-3",id:"agent",name:"","aria-label":".form-select-lg","onUpdate:modelValue":n[0]||(n[0]=t=>o.value=t)},[z,(c(!0),r(N,null,V(i.value,t=>(c(),r("option",{key:t.id,value:t.id},L(t.name),9,P))),128))],512),[[C,o.value]]),q,e("button",{class:"btn btn-secondary btn-lg ms-2",type:"button",onClick:u},"Close")])],32))}},J={key:0,class:"loading-overlay"},K=e("i",{class:"fas fa-spinner fa-spin"},null,-1),G=[K],Q=e("option",{value:null,disabled:""},"Select Agents",-1),X=["value"],Y=e("button",{class:"btn btn-primary btn-lg",type:"submit"},"Submit",-1),Z={__name:"AssignedModal",props:["customerId","close","agentName","customerId","loanId"],emits:["close"],setup(l,{emit:p}){const i=b([]);b(null);const o=l,s=A({agent:null,loanId:o.loanId});E.get("/assignAgent").then(a=>{i.value=a.data}).catch(a=>{console.error("Error:",a)});const y=p;_(()=>{console.log(o.loanId)});const g=async()=>{const a=o.customerId,n=B(),t=`/storeAssignAgent/${a}`;s.post(t,{onStart:()=>{s.pending=!0},onSuccess:d=>{n.success("Agent assigned Successfully"),setTimeout(()=>{window.location.reload()},1500)},onError:d=>{n.error("Validation Error: Some error occured")},onFinish:()=>{s.pending=!1}})};T(()=>o.show,()=>{o.show?document.body.style.overflow="hidden":document.body.style.overflow=null});const f=()=>{console.log("Asssigned Modal vue"),y("close")},u=a=>{a.key==="Escape"&&o.show&&f()};return _(async()=>{document.addEventListener("keydown",u),s.agent=o.agentName}),F(()=>{document.removeEventListener("keydown",u),document.body.style.overflow=null}),U(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"})[o.maxWidth]),(a,n)=>(c(),r("form",{onSubmit:M(g,["prevent"])},[m(s).pending?(c(),r("div",J,G)):h("",!0),v(e("input",{type:"hidden","onUpdate:modelValue":n[0]||(n[0]=t=>m(s).loanId=t)},null,512),[[W,m(s).loanId]]),v(e("select",{class:"form-select form-select-lg mb-3",id:"agent",name:"","aria-label":".form-select-lg","onUpdate:modelValue":n[1]||(n[1]=t=>m(s).agent=t)},[Q,(c(!0),r(N,null,V(i.value,t=>(c(),r("option",{key:t.id,value:t.id},L(t.name),9,X))),128))],512),[[C,m(s).agent]]),Y,e("button",{class:"btn btn-secondary btn-lg ms-2",type:"button",onClick:f},"Close")],32))}},ee={key:0,class:"loading-overlay"},te=e("i",{class:"fas fa-spinner fa-spin"},null,-1),se=[te],oe=e("option",{value:null,disabled:""},"Select Status",-1),ne=["value"],le={key:1},ae=e("button",{class:"btn btn-primary btn-lg",type:"submit"},"Submit",-1),ce={__name:"ChangeStatus",props:["loanId","close","initialStatus"],emits:["close"],setup(l,{emit:p}){const i=b([]);b(null);const o=l,s=A({status:null,incompleteReason:null}),y=p,g=async()=>{try{const n=await E.get("/status-options");i.value=n.data}catch(n){console.error("Error fetching status options:",n)}};_(async()=>{document.addEventListener("keydown",a),await g(),s.status=o.initialStatus});const f=async()=>{const n=o.loanId,t=B(),d=`/changeLoanStatus/${n}`;s.post(d,{onStart:()=>{s.pending=!0},onSuccess:x=>{t.success("Status changed Successfully")},onError:x=>{t.error("Validation Error: Please check your input")},onFinish:()=>{s.pending=!1}})},u=()=>{y("close")},a=n=>{n.key==="Escape"&&o.show&&u()};return F(()=>{document.removeEventListener("keydown",a),document.body.style.overflow=null}),U(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"})[o.maxWidth]),(n,t)=>(c(),r("form",{onSubmit:M(f,["prevent"])},[m(s).pending?(c(),r("div",ee,se)):h("",!0),v(e("select",{class:"form-select form-select-lg mb-3",id:"status",name:"","aria-label":".form-select-lg","onUpdate:modelValue":t[0]||(t[0]=d=>m(s).status=d)},[oe,(c(!0),r(N,null,V(i.value,d=>(c(),r("option",{key:d.value,value:d.value},L(d.name),9,ne))),128))],512),[[C,m(s).status]]),m(s).status==3||m(s).status==2?(c(),r("p",le,[v(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=d=>m(s).incompleteReason=d),placeholder:"Enter Reason"},null,512),[[W,m(s).incompleteReason]])])):h("",!0),ae,e("button",{class:"btn btn-secondary btn-lg ms-2",type:"button",onClick:u},"Close")],32))}},ie={class:"fixed inset-0 overflow-y-auto px-4 py-6 sm:px-0 z-50","scroll-region":""},re=e("div",{class:"absolute inset-0 bg-gray-500 opacity-75"},null,-1),de=[re],ue={key:1,class:"flex items-center justify-center h-full"},me={class:"bg-white rounded-lg p-12 max-w-xs"},ye=e("h2",{class:"text-2xl font-bold mb-4"},"Assign Agent",-1),ge={key:2,class:"flex items-center justify-center h-full"},fe={class:"bg-white rounded-lg p-12 max-w-xs"},ve=e("h2",{class:"text-2xl font-bold mb-4"},"Assign Agents",-1),pe={key:3,class:"flex items-center justify-center h-full"},he={class:"bg-white rounded-lg p-12 max-w-xs"},be=e("h2",{class:"text-2xl font-bold mb-4"},"Change Status",-1),we={__name:"Modal",props:{show:{type:Boolean,default:!1},maxWidth:{type:String,default:"2xl"},closeable:{type:Boolean,default:!0},modal:{type:Number,default:1},leadId:{type:null,default:null},loanId:{type:Number,default:null},initialStatus:{type:Number},agentName:{type:Number},customerId:{type:Number}},emits:["close"],setup(l,{emit:p}){const i=l,o=b(0),s=p;T(()=>i.show,()=>{i.show?document.body.style.overflow="hidden":document.body.style.overflow=null,o.value++});const y=()=>{console.log("Modal vue"),i.closeable&&(i.modal=0,s("close"),location.reload())},g=u=>{u.key==="Escape"&&i.show&&y()};_(()=>document.addEventListener("keydown",g)),F(()=>{document.removeEventListener("keydown",g),document.body.style.overflow=null});const f=U(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-xl","2xl":"sm:max-w-2xl"})[i.maxWidth]);return(u,a)=>(c(),w(O,{to:"body"},[S($,{"leave-active-class":"duration-200"},{default:I(()=>[v(e("div",ie,[S($,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:I(()=>[v(e("div",{class:"fixed inset-0 transform transition-all",onClick:y},de,512),[[k,l.show]])]),_:1}),S($,{"enter-active-class":"ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:I(()=>[v(e("div",{class:j(["mb-6 bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:w-full sm:mx-auto",f.value])},[l.show?D(u.$slots,"default",{key:0}):h("",!0),l.modal===1?(c(),r("div",ue,[e("div",me,[ye,(c(),w(H,{key:o.value,leadId:l.leadId,onClose:y},null,8,["leadId"]))])])):h("",!0),l.modal===2?(c(),r("div",ge,[e("div",fe,[ve,(c(),w(Z,{key:o.value,loanId:l.loanId,customerId:l.customerId,agentName:l.agentName,onClose:y},null,8,["loanId","customerId","agentName"]))])])):h("",!0),l.modal===3?(c(),r("div",pe,[e("div",he,[be,(c(),w(ce,{key:o.value,loanId:l.loanId,initialStatus:l.initialStatus,onClose:y},null,8,["loanId","initialStatus"]))])])):h("",!0)],2),[[k,l.show]])]),_:3})],512),[[k,l.show]])]),_:3})]))}};export{we as _};
